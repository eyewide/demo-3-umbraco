@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Core.Models.Blocks;
@model IPublishedContent

@{
    var modelParent = Model.Parent;
    var childSelection = modelParent?.Children
        ?.Where(x => x.IsVisible() && x.Id != Model.Id)
        ?? Enumerable.Empty<IPublishedContent>();
}

@if (childSelection.Any())
{
    var i = 1;

    <div class="bg-section-light py-sm-offset">
        <div class="col-11 col-xl-10 mx-auto">
            <div class="other-pages">
                <h2 class="h3 text-center">@Html.Raw(Umbraco.GetDictionaryValue("HeaderViewAlso"))</h2>

                <div class="sliderContainer">
                    <div class="swiper othersSwiper">
                        <div class="swiper-wrapper">
                            @foreach (var item in childSelection)
                            {
                                <div class="swiper-slide">
                                    <div class="simple-box">
                                        @if (item.HasValue("imageForListing"))
                                        {
                                            var img = item.Value<IPublishedContent>("imageForListing");
                                            if (img != null)
                                            {
                                                <a href="@item.Url()" title="@Html.Raw(item.Value("menuTitle"))">
                                                    <picture>
                                                        <source srcset="@img.GetCropUrl("square-md")&amp;quality=70&amp;format=webp" media="(min-width: 992px)" type="image/webp">
                                                        <source srcset="@img.GetCropUrl("square-md")&amp;quality=70" media="(min-width: 992px)" type="image/jpeg">
                                                        <source srcset="@img.GetCropUrl("square-sm")&amp;quality=70&amp;format=webp" media="(min-width: 768px)" type="image/webp">
                                                        <source srcset="@img.GetCropUrl("square-sm")&amp;quality=70" media="(min-width: 768px)" type="image/jpeg">
                                                        <source srcset="@img.GetCropUrl("horizontal-sm")&amp;quality=70&amp;format=webp" media="(min-width: 576px)" type="image/webp">
                                                        <source srcset="@img.GetCropUrl("horizontal-sm")&amp;quality=70" media="(min-width: 576px)" type="image/jpeg">
                                                        <source srcset="@img.GetCropUrl("square-sm")&amp;quality=70&amp;format=webp" media="(min-width: 0px)" type="image/webp">
                                                        <source srcset="@img.GetCropUrl("square-sm")&amp;quality=70" media="(min-width: 0px)" type="image/jpeg">
                                                        <img src="@img.GetCropUrl("square-sm")&amp;quality=70" alt="@await Html.PartialAsync("/Views/Partials/Shared/_AltTextImage.cshtml", img)" class="img-fluid fit-img lazyload">
                                                    </picture>
                                                </a>
                                            }
                                        }

                                        <div class="text-holder">
                                            <h3 class="sm-header">@Html.Raw(item.Value("menuTitle"))</h3>

                                            @if (item.HasValue("shortDescription"))
                                            {
                                                <div class="pt-2">
                                                    @Html.Raw(item.Value("shortDescription"))
                                                </div>
                                            }

                                            <div class="mt-3">
                                                <a href="@item.Url()" title="@Html.Raw(item.Value("menuTitle"))" class="underline-btn">
                                                    @Html.Raw(Umbraco.GetDictionaryValue("ButtonMore"))
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                i++;
                            }
                        </div>

                        <div class="swiper-button-prev"></div>
                        <div class="swiper-button-next"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}